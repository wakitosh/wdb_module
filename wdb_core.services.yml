services:
  wdb_core.data_service:
    class: Drupal\wdb_core\Service\WdbDataService
    arguments:
      - '@entity_type.manager'
      - '@config.factory'
      - '@logger.factory'
      - '@wdb_core.hull_calculator'

  wdb_core.text_generator:
    class: Drupal\wdb_core\Service\WdbTextGeneratorService
    arguments:
      - '@entity_type.manager'

  wdb_core.data_importer:
    class: Drupal\wdb_core\Service\WdbDataImporterService
    arguments:
      - '@entity_type.manager'

  wdb_core.hull_calculator:
    class: Drupal\wdb_core\Lib\HullJsPhp\HullPHP

  wdb_core.access_checker:
    class: Drupal\wdb_core\Access\WdbAccessCheck
    arguments:
      - '@config.factory'
      - '@wdb_core.data_service'
    tags:
      - { name: access_check, applies_to: _wdb_gallery_access }

  wdb_core.route_subscriber:
    class: Drupal\wdb_core\Routing\WdbRouteSubscriber
    tags:
      - { name: event_subscriber }

  wdb_core.search_api_controller:
    class: Drupal\wdb_core\Controller\SearchApiController
    arguments:
      - '@entity_type.manager'
      - '@wdb_core.hull_calculator'
      - '@wdb_core.data_service'
    tags:
      - { name: controller.service_arguments }

  wdb_core.gallery_controller:
    class: Drupal\wdb_core\Controller\GalleryController
    arguments:
      - '@entity_type.manager'
      - '@module_handler'
      - '@url_generator'
      - '@wdb_core.data_service'
      - '@request_stack'
    tags:
      - { name: controller.service_arguments }

  wdb_core.annotation_edit_controller:
    class: Drupal\wdb_core\Controller\AnnotationEditController
    arguments:
      - '@entity_type.manager'
      - '@module_handler'
      - '@wdb_core.data_service'
      - '@request_stack'
    tags:
      - { name: controller.service_arguments }

  wdb_core.iiif_v3_manifest_controller:
    class: Drupal\wdb_core\Controller\IiifV3ManifestController
    arguments:
      - '@entity_type.manager'
      - '@wdb_core.data_service'
      - '@http_client_factory'
      - '@request_stack'
    tags:
      - { name: controller.service_arguments }

  wdb_core.dialog_content_controller:
    class: Drupal\wdb_core\Controller\DialogContentController
    arguments:
      - '@wdb_core.data_service'
      - '@renderer'
    tags:
      - { name: controller.service_arguments }

  wdb_core.full_text_controller:
    class: Drupal\wdb_core\Controller\FullTextController
    arguments:
      - '@wdb_core.text_generator'
    tags:
      - { name: controller.service_arguments }

  wdb_core.annotation_api_controller:
    class: Drupal\wdb_core\Controller\AnnotationApiController
    arguments:
      - '@entity_type.manager'
      - '@url_generator'
      - '@wdb_core.hull_calculator'
      - '@wdb_core.data_service'
      - '@request_stack'
    tags:
      - { name: controller.service_arguments }

  wdb_core.export_controller:
    class: Drupal\wdb_core\Controller\ExportController
    arguments:
      - '@wdb_core.data_service'
      - '@wdb_core.text_generator'
      - '@wdb_core.hull_calculator'
      - '@entity_type.manager'
      - '@renderer'
    tags:
      - { name: controller.service_arguments }

  wdb_core.data_import_form:
    class: Drupal\wdb_core\Form\WdbDataImportForm
    arguments:
      - '@wdb_core.data_importer'
      - '@entity_type.manager'
      - '@language_manager'
      - '@file_system'
    tags:
      - { name: form }

  wdb_core.source_view_controller:
    class: Drupal\wdb_core\Controller\WdbSourceViewController
    arguments:
      - '@entity_type.manager'
    tags:
      - { name: controller.service_arguments }

  wdb_core.template_generator:
    class: Drupal\wdb_core\Service\WdbTemplateGeneratorService
    arguments:
      - '@entity_type.manager'
      - '@logger.factory'

  wdb_core.template_generator_form:
    class: Drupal\wdb_core\Form\WdbTemplateGeneratorForm
    arguments:
      - '@wdb_core.template_generator'
      - '@entity_type.manager'
    tags:
      - { name: form }

  wdb_core.pos_mapping_generator:
    class: Drupal\wdb_core\Service\WdbPosMappingGeneratorService
    arguments:
      - '@entity_type.manager'
      - '@transliteration'

  wdb_core.autocomplete_controller:
    class: Drupal\wdb_core\Controller\AutocompleteController
    arguments:
      - '@entity_type.manager'
    tags:
      - { name: controller.service_arguments }

  wdb_core.breadcrumb:
    class: Drupal\wdb_core\Breadcrumb\WdbBreadcrumbBuilder
    arguments: ['@entity_type.manager', '@title_resolver', '@request_stack']
    tags:
      - { name: breadcrumb_builder, priority: 100 }
